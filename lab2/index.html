<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø¥ÙƒØ³ Ø£Ùˆ Ø§Ù„Ø­Ø¯ÙŠØ«Ø©</title>
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #ec4899;
            --bg: #0f172a;
            --card-bg: rgba(255, 255, 255, 0.1);
            --text: #f8fafc;
        }

        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
        }

        body {
            background: radial-gradient(circle at top left, #1e293b, #0f172a);
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 500px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        h1 { margin-bottom: 20px; color: var(--primary); }

        /* Setup Screen */
        #setup-screen { display: flex; flex-direction: column; gap: 15px; }
        
        input {
            padding: 12px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 1rem;
            text-align: center;
        }

        .mode-selection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }

        button {
            padding: 12px 20px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            background: var(--primary);
            color: white;
        }

        button:hover { transform: translateY(-2px); filter: brightness(1.2); }
        .secondary-btn { background: var(--secondary); }

        /* Game Screen */
        #game-screen { display: none; }
        
        .status-bar {
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .cell {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }

        .cell:hover { background: rgba(255, 255, 255, 0.1); }
        .cell.x { color: var(--primary); }
        .cell.o { color: var(--secondary); }

        /* Footer */
        footer {
            margin-top: auto;
            padding: 20px;
            text-align: center;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #94a3b8;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            width: 100%;
        }

        footer b { color: var(--text); }

        @media (max-width: 400px) {
            .container { padding: 15px; }
            .cell { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Ù„Ø¹Ø¨Ø© XO</h1>

        <div id="setup-screen">
            <p>Ø§Ø®ØªØ± Ù†Ù…Ø· Ø§Ù„Ù„Ø¹Ø¨ ÙˆØ£Ø¯Ø®Ù„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡:</p>
            <div class="mode-selection">
                <button onclick="setMode(1)">Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯</button>
                <button onclick="setMode(2)" class="secondary-btn">Ù„Ø§Ø¹Ø¨Ø§Ù†</button>
            </div>
            <input type="text" id="p1-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„ (X)" value="Ù„Ø§Ø¹Ø¨ 1">
            <input type="text" id="p2-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ (O)" value="Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±">
            <button onclick="startGame()" style="width: 100%; margin-top: 10px; background: #10b981;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
        </div>

        <div id="game-screen">
            <div class="status-bar" id="status">Ø¯ÙˆØ±: Ù„Ø§Ø¹Ø¨ 1</div>
            <div class="board" id="board">
                <div class="cell" onclick="makeMove(0)"></div>
                <div class="cell" onclick="makeMove(1)"></div>
                <div class="cell" onclick="makeMove(2)"></div>
                <div class="cell" onclick="makeMove(3)"></div>
                <div class="cell" onclick="makeMove(4)"></div>
                <div class="cell" onclick="makeMove(5)"></div>
                <div class="cell" onclick="makeMove(6)"></div>
                <div class="cell" onclick="makeMove(7)"></div>
                <div class="cell" onclick="makeMove(8)"></div>
            </div>
            <button onclick="resetGame()" class="secondary-btn">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
            <button onclick="backToMenu()" style="background: transparent; color: #94a3b8;">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        </div>
    </div>

    <footer>
        <p>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨: <b>Ø¹Ø¨Ø¯Ø§Ù„Ù…Ù„Ùƒ Ø³Ø±Ø§Ø¬ Ø§Ù„Ø¯ÙŠÙ† Ø¹Ù…Ø± Ø¯Ø§ØºØ³ØªØ§Ù†ÙŠ</b></p>
        <p>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ: <b>446008594</b></p>
        <p>Ø¨Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¯ÙƒØªÙˆØ±: <b>Mohammed Ahmed Jabali</b></p>
    </footer>

    <script>
        let board = ['', '', '', '', '', '', '', '', ''];
        let currentPlayer = 'X';
        let gameActive = false;
        let gameMode = 1; // 1 = vs CPU, 2 = vs Human
        let names = { X: '', O: '' };

        const statusDisplay = document.getElementById('status');
        const cells = document.querySelectorAll('.cell');

        function setMode(mode) {
            gameMode = mode;
            const p2Input = document.getElementById('p2-name');
            p2Input.value = (mode === 1) ? "Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±" : "Ù„Ø§Ø¹Ø¨ 2";
            alert(mode === 1 ? "ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù†Ù…Ø· Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯" : "ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù†Ù…Ø· Ù„Ø§Ø¹Ø¨ÙŠÙ†");
        }

        function startGame() {
            names.X = document.getElementById('p1-name').value || "Ù„Ø§Ø¹Ø¨ 1";
            names.O = document.getElementById('p2-name').value || (gameMode === 1 ? "Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±" : "Ù„Ø§Ø¹Ø¨ 2");
            
            document.getElementById('setup-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            
            gameActive = true;
            resetGame();
        }

        function makeMove(index) {
            if (board[index] !== '' || !gameActive) return;

            executeMove(index, 'X');

            if (gameActive && gameMode === 1) {
                setTimeout(cpuMove, 500);
            }
        }

        function executeMove(index, player) {
            board[index] = player;
            cells[index].innerText = player;
            cells[index].classList.add(player.toLowerCase());
            
            if (checkWin()) {
                statusDisplay.innerText = `Ø§Ù„ÙØ§Ø¦Ø² Ù‡Ùˆ: ${names[player]}! ğŸ‰`;
                gameActive = false;
                return;
            }

            if (board.every(cell => cell !== '')) {
                statusDisplay.innerText = "ØªØ¹Ø§Ø¯Ù„!";
                gameActive = false;
                return;
            }

            currentPlayer = (player === 'X') ? 'O' : 'X';
            statusDisplay.innerText = `Ø¯ÙˆØ±: ${names[currentPlayer]}`;
        }

        function cpuMove() {
            if (!gameActive) return;
            let available = board.map((v, i) => v === '' ? i : null).filter(v => v !== null);
            let randomIdx = available[Math.floor(Math.random() * available.size)]; // Logical mistake fix:
            let move = available[Math.floor(Math.random() * available.length)];
            executeMove(move, 'O');
        }

        function checkWin() {
            const wins = [
                [0,1,2], [3,4,5], [6,7,8],
                [0,3,6], [1,4,7], [2,5,8],
                [0,4,8], [2,4,6]
            ];
            return wins.some(condition => {
                return condition.every(index => board[index] === currentPlayer);
            });
        }

        function resetGame() {
            board = ['', '', '', '', '', '', '', '', ''];
            gameActive = true;
            currentPlayer = 'X';
            statusDisplay.innerText = `Ø¯ÙˆØ±: ${names.X}`;
            cells.forEach(cell => {
                cell.innerText = '';
                cell.classList.remove('x', 'o');
            });
        }

        function backToMenu() {
            document.getElementById('setup-screen').style.display = 'flex';
            document.getElementById('game-screen').style.display = 'none';
        }
    </script>
</body>
</html>

